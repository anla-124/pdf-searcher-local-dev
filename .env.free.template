# =============================================================================
# PDF SEARCHER - FREE TIER TEMPLATE
# =============================================================================
# This template file shows the required environment variables for the free tier.
# Copy this file to .env.local and fill in your actual values.
#
# Configuration:
# - Supabase: Your Supabase project
# - Qdrant: Qdrant Cloud free tier
# - Google Cloud: Free tier Document AI
# - Draftable: Self-hosted or managed instance
# =============================================================================

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Get these from your Supabase project settings: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# =============================================================================
# GOOGLE CLOUD DOCUMENT AI CONFIGURATION
# =============================================================================
# Create a project at https://console.cloud.google.com/
# Enable Document AI API and create processors
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_LOCATION=us
GOOGLE_CLOUD_PROCESSOR_ID=your-processor-id
GOOGLE_CLOUD_OCR_PROCESSOR_ID=your-ocr-processor-id
GOOGLE_APPLICATION_CREDENTIALS=./credentials/google-service-account.json

# =============================================================================
# QDRANT VECTOR DATABASE CONFIGURATION
# =============================================================================
# Sign up for Qdrant Cloud free tier: https://cloud.qdrant.io/
QDRANT_URL=https://your-cluster-id.region.cloud.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key
QDRANT_COLLECTION_NAME=subscription-documents

# =============================================================================
# DRAFTABLE COMPARISON API CONFIGURATION
# =============================================================================
# Configure your Draftable instance
NEXT_PUBLIC_DRAFTABLE_ACCOUNT_ID=your-account-id
DRAFTABLE_AUTH_TOKEN=your-auth-token
NEXT_PUBLIC_DRAFTABLE_API_URL=https://your-draftable-url/api/v1

# =============================================================================
# CRON & BACKGROUND JOBS
# =============================================================================
# Generate a secure random string for CRON_SECRET
CRON_SECRET=your-secure-random-string

# =============================================================================
# DATABASE CONNECTION POOL
# =============================================================================
DB_POOL_MIN_CONNECTIONS=5
DB_POOL_MAX_CONNECTIONS=80
DB_POOL_IDLE_TIMEOUT=300000
DB_POOL_CONNECTION_TIMEOUT=30000  # 30 seconds - prevents infinite hangs

# =============================================================================
# CONCURRENCY LIMITING & PROCESSING
# =============================================================================
UNLIMITED_PROCESSING=false
# Conservative configuration for load testing (per Codex's recommendation)
UPLOAD_GLOBAL_LIMIT=12
UPLOAD_PER_USER_LIMIT=5
DELETE_GLOBAL_LIMIT=5
DELETE_PER_USER_LIMIT=3
QDRANT_DELETE_MAX_RETRIES=3
QDRANT_DELETE_BACKOFF_MS=2000
MAX_CONCURRENT_DOCUMENTS=10
MAX_CONCURRENT_CHUNKS_PER_DOC=15
LARGE_DOCUMENT_THRESHOLD_MB=5

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================
MAX_CHUNK_CHARACTERS=1000
DUMP_DOCUMENT_AI=0

# =============================================================================
# LOGGING
# =============================================================================
VERBOSE_LOGS=true

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# TLS certificate validation stays enabled. If you are behind a corporate proxy
# with a custom CA, import the CA instead of disabling checks.
